# 変更履歴

## 2024-01-XX - 複数テーブル対応とAIフォールバック機能追加

### 追加機能

1. **テーブル検出機能**
   - ルールベースのテーブル検出（データ密度分析、複数テーブル対応）
   - AIフォールバック機能（Gemini API、信頼度が低い場合のみ）

2. **付表１の変換機能**
   - 相互連携性情報項目表の変換処理を追加
   - 複数テーブル対応

3. **既存コンバーターの改善**
   - `mapping-converter.ts`: 複数テーブル対応、async化
   - `code-def-converter.ts`: 複数テーブル対応、async化
   - `excel-to-json.ts`: 付表１の変換処理を追加

### 変更点

1. **データローダーの更新**
   - 複数テーブル対応（同じメッセージタイプ/コードタイプで複数テーブルを管理）
   - 付表１のデータ読み込み機能追加
   - `tableType`パラメータによる特定テーブル取得機能

2. **マッパーサービスの更新**
   - 複数テーブル対応
   - `mapping`タイプのテーブルを優先的に使用

### 依存関係

- `@google/generative-ai`: Gemini API用（オプション）

### 環境変数

- `GEMINI_API_KEY`: Gemini APIキー（オプション、AIフォールバック用）

### 注意事項

- 複数テーブルが検出された場合、各テーブルは個別のJSONファイルとして出力されます
- AIフォールバックは信頼度が0.6未満の場合のみ実行されます
- Gemini APIキーが設定されていない場合、AIフォールバックはスキップされます

